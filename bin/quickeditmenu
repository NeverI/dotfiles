#!/usr/bin/env bash

cmd=$(cat ~/.quickedit  | dmenu "$@")

[[ -n $file ]] || exit

recent_list "$file" ~/.quickedit

fullpath=$(echo "$file" | sed "s,~,$HOME,")
cmd="nvim $fullpath"

if [[ "$fullpath" =~ !$ ]]; then
  cmd=$(echo "sudo $cmd" | cut -d'!' -f1)
fi

st -n FloatMe -e $cmd
